# process.envの型

環境変数を使った分岐をする際に`process.env`などが使われます。

```ts
process.env.NODE_ENV === 'production'
```

もともとの型付は以下なので、基本的に全て`string`になり型が弱いです。

```ts
interface ProcessEnv {
  [key: string]: string | undefined;
}
```

これを型付するには、プロジェクト内で`global.d.ts`等の型定義をおいて、以下のように上書きすると便利です。
これで`process.env`が型的に扱いやすくなります。
また、tsdoc形式でコメントを書けば何の値かがVSCode上でわかるのでプロジェクト特有の環境変数と使う場合はコメントを書くことをおすすめします。

```ts
/// <reference types="node" />

declare namespace NodeJS {
  interface ProcessEnv {
    readonly NODE_ENV: 'development' | 'production' | 'test';
    readonly PUBLIC_URL: string;
  }
}
```

上記の定義は`create-react-app`や`next.js`と同じやり方です。

https://github.com/facebook/create-react-app/blob/394e385d5e25705ebd9f82e90958f6f207a5c315/packages/react-scripts/lib/react-app.d.ts#L5-L10

https://github.com/vercel/next.js/blob/b8d785d2865ae5c6d771f7228e72d940904fe975/packages/next/types/global.d.ts#L12-L14
